{
  "name": "Chatbot",
  "nodes": [
    {
      "parameters": {
        "updates": [
          "messages"
        ],
        "options": {}
      },
      "type": "n8n-nodes-base.whatsAppTrigger",
      "typeVersion": 1,
      "position": [
        -4288,
        -224
      ],
      "id": "2762385b-50c7-40e7-84fc-7df4c0235dc0",
      "name": "WhatsApp Trigger",
      "webhookId": "8a5e6679-d4c0-4192-8033-d8e77ec9244f",
      "notesInFlow": false,
      "alwaysOutputData": false,
      "executeOnce": false,
      "retryOnFail": false,
      "credentials": {
        "whatsAppTriggerApi": {
          "id": "naDLVQrbrxVn9sbj",
          "name": "WhatsApp OAuth account"
        }
      }
    },
    {
      "parameters": {
        "fieldToSplitOut": "={{ $json.field }}",
        "options": {}
      },
      "type": "n8n-nodes-base.splitOut",
      "typeVersion": 1,
      "position": [
        -3760,
        -208
      ],
      "id": "6181d915-d544-4450-b717-bf4aa99909a1",
      "name": "Split Out"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.type === \"audio\" && Boolean($json.audio) }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "id": "63756e7f-6d4b-4d24-ba9c-8316cc59b310"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Audio"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "97de9df9-0caf-44c0-ba66-d3c5f2392620",
                    "leftValue": "={{ $json.type === \"video\" && Boolean($json.video) }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Video"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "2dc7ebbe-6530-49dd-a5b9-9b95ee70e1f7",
                    "leftValue": "={{ $json.type === \"image\" && Boolean($json.image) }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Image"
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra",
          "renameFallbackOutput": "text"
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -3360,
        -240
      ],
      "id": "e8e0ca0a-edb2-4714-a549-ac681148b3b1",
      "name": "Switch"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "15369582-2234-4ff5-8296-80d880e99c35",
              "name": "text",
              "value": "={{ $json.text.body }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -2544,
        352
      ],
      "id": "257cc80c-64b4-4a6b-9fc5-a2052d4bdab0",
      "name": "Edit Fields"
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $json.audio.id }}"
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        -2928,
        -560
      ],
      "id": "7a23c926-9931-48df-99fa-b406515fcf71",
      "name": "Download media",
      "webhookId": "129b7afc-5762-4270-be38-c6c55ad80517",
      "credentials": {
        "whatsAppApi": {
          "id": "PsduobOmI1mbKTW7",
          "name": "WhatsApp account"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "whatsAppApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2576,
        -688
      ],
      "id": "61e6d7b4-d3a0-4576-9bf8-25a1943fb75b",
      "name": "HTTP Request",
      "credentials": {
        "whatsAppApi": {
          "id": "9eXgurNjgGM40wSq",
          "name": "WhatsApp account 2"
        }
      }
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -2224,
        -704
      ],
      "id": "0bf29b54-0c93-4b9f-b0bc-239aad11257c",
      "name": "Transcribe a recording",
      "credentials": {
        "openAiApi": {
          "id": "80U5hXgVtpGeuws4",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "resource": "media",
        "operation": "mediaUrlGet",
        "mediaGetId": "={{ $json.image.id }}"
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        -2944,
        -176
      ],
      "id": "433b8f4c-25be-436f-9651-703c1d057216",
      "name": "Download media1",
      "webhookId": "749aa2cf-06a7-4fb1-b9c4-803058a76389",
      "credentials": {
        "whatsAppApi": {
          "id": "9eXgurNjgGM40wSq",
          "name": "WhatsApp account 2"
        }
      }
    },
    {
      "parameters": {
        "url": "={{ $json.url }}",
        "authentication": "predefinedCredentialType",
        "nodeCredentialType": "whatsAppApi",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -2480,
        -160
      ],
      "id": "c5115b34-9fe3-4da6-bb8e-28f9e367b8f0",
      "name": "HTTP Request1",
      "credentials": {
        "whatsAppApi": {
          "id": "9eXgurNjgGM40wSq",
          "name": "WhatsApp account 2"
        }
      }
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "GPT-4O"
        },
        "inputType": "base64",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -2128,
        -256
      ],
      "id": "5bc9c329-6fdd-436c-be3a-1f36293780a5",
      "name": "Analyze image",
      "credentials": {
        "openAiApi": {
          "id": "80U5hXgVtpGeuws4",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5fdb028e-1ec2-445e-be7a-1c4c61a8125a",
              "name": "message_type",
              "value": "={{ $('Switch').item.json.type }}",
              "type": "string"
            },
            {
              "id": "24a1c6f0-a968-48db-9afd-6dcab49bbae1",
              "name": "text_image",
              "value": "={{ $json.text }}",
              "type": "string"
            },
            {
              "id": "49b1a949-daa0-4c90-b777-284809e1d504",
              "name": "From",
              "value": "={{ $('WhatsApp Trigger').item.json.contacts[0].wa_id }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1280,
        -496
      ],
      "id": "1ebf951f-d8da-4fac-a611-a8d858987474",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "=L'utilisateur a envoy√© le message suivant :\nType de message : {{ $json.message_type }}\nTexte du message ou description :{{ $json.text_image }}\nExp√©diteur : {{ $json.From }}",
        "hasOutputParser": true,
        "options": {
          "systemMessage": "## üìä **PATTERNS D'EXTRACTION**\n\n### **D√©tection ann√©e de BAC (patterns √† reconna√Ætre) :**\n- Ann√©es explicites : \"2020\", \"2015\", \"2002\", etc. (entre 1980-2030)\n- Formats variations : \"bac 2020\", \"bac en 2015\", \"dipl√¥m√© 2018\"\n- Expressions : \"j'ai eu mon bac en\", \"baccalaur√©at 20XX\", \"dipl√¥me 20XX\"\n- **Nouveaux cas** : \"nouveau bachelier\", \"je viens d'avoir mon bac\" ‚Üí ann√©e courante (2025)\n- **Lyc√©ens** : \"terminale\", \"premi√®re\", \"au lyc√©e\" ‚Üí `anneeBac = \"lyc√©en\"`\n- **Sans bac** : \"pas de bac\", \"jamais pass√©\", \"n'ai pas le bac\" ‚Üí `anneeBac = \"sans bac\"`\n\n### **D√©tection profession (avec tol√©rance fautes) :**\n- Mots-cl√©s exacts : √©tudiant, infirmier, professeur, ing√©nieur, comptable, serveur, etc.\n- **Avec fautes** : \"etudiante\" ‚Üí \"√©tudiante\", \"infrmier\" ‚Üí \"infirmier\"\n- **Variations** : \"je suis X\", \"je travaille comme X\", \"m√©tier X\", \"profession X\"\n- **Statuts** : \"au ch√¥mage\", \"sans emploi\", \"en recherche\" ‚Üí profession = \"sans emploi\"\n\n### **D√©tection r√©ponse r√©servation :**\n- **R√©ponses positives** : \"oui\", \"j'ai r√©serv√©\", \"c'est fait\", \"d√©j√† fait\", \"r√©serv√©\", etc.\n- **R√©ponses n√©gatives** : \"non\", \"pas encore\", \"j'ai oubli√©\", \"pas fait\", etc.\n\n---\n\n## üé≠ **TON R√îLE**   \nTu es un assistant virtuel professionnel, chaleureux et efficace, repr√©sentant officiel de l'agence Eazy Visa.  \nTu accompagnes les prospects WhatsApp pour r√©pondre √† leurs messages et les orienter vers un rendez-vous gratuit en ligne.\n\n## ‚ÑπÔ∏è **INFORMATIONS √Ä TOUJOURS CONNA√éTRE**  \n- **Nom** : Eazy Visa  \n- **Fond√©e en** : 2021  \n- **Bas√©e √†** : Dakar, S√©n√©gal  \n- **Adresse** : Ouest Foire, Xandar 2, Villa N¬∞3, 12000 Dakar, S√©n√©gal\n- **Adresse alternative** : Ouest Foire, rue Xandar 3, c√¥t√© March√© Serigne Fallou  \n- **T√©l√©phone** : +221 76 948 60 60  \n- **Contact expert** : +221 76 884 63 63\n- **Email** : service@eazy-visa.com  \n- **Google Maps** : https://maps.app.goo.gl/bVNGCPhvWHybJUx28\n- **Accompagnement** : 100 % en ligne, mais pr√©sence physique √† Dakar ‚úÖ\n\n## üôã‚Äç‚ôÄÔ∏è **PR√âSENTATION**  \n- L'agent commence uniquement le tout premier message par une salutation int√©gr√©e dans le message (ex. : \"Bonjour et bienvenue ! üòä\")  \n- Les messages suivants ne doivent pas contenir de salutation.  \n**Objectif** : √©viter les r√©p√©titions et rendre l'√©change plus fluide et professionnel.\n\n---\n\n## üîÑ **FLUX DE TRAITEMENT OBLIGATOIRE**\n\n### **üö® √âTAPE 1 - CONSULTATION M√âMOIRE (OBLIGATOIRE)**\n**AVANT TOUTE ANALYSE** : Ex√©cuter `Regarder_prospect` avec le num√©ro WhatsApp\n- Si c'est le premier contact ‚Üí `lienEnvoye = false`, `anneeBac = \"\"`, `profession = \"\"`\n- Si l'historique existe ‚Üí r√©cup√©rer `anneeBac`, `profession`, `lienEnvoye`\n\n### **üö® √âTAPE 2 - ANALYSE DU MESSAGE**\nAnalyser le message SELON les donn√©es r√©cup√©r√©es de la m√©moire ET **appliquer la NOUVELLE LOGIQUE DE CONVERSION OPTIMIS√âE**\n\n### **üö® √âTAPE 3 - G√âN√âRATION DE LA R√âPONSE**  \nG√©n√©rer la r√©ponse appropri√©e selon la logique d√©finie\n\n### **üö® √âTAPE 4 - MISE √Ä JOUR M√âMOIRE (OBLIGATOIRE)**\nEx√©cuter `Append_prospect` pour sauvegarder les nouvelles donn√©es\n\n---\n\n## üéØ **NOUVELLE LOGIQUE DE CONVERSION OPTIMIS√âE**\n\n### **‚ö° R√àGLE PRIORITAIRE : BAC D√âTECT√â = CONVERSION IMM√âDIATE**\n```\nSI ann√©e de BAC d√©tect√©e dans le message actuel :\n‚Üí Conversion directe vers prise de rendez-vous\n‚Üí M√äME SI la profession n'est pas mentionn√©e\n‚Üí Mettre lienEnvoye = true\n‚Üí Message de conversion optimis√©\n```\n\n### **‚è≥ R√àGLE SECONDAIRE : PAS DE BAC D√âTECT√â**\n```\nSI aucune ann√©e de BAC d√©tect√©e :\n‚Üí Demander l'ann√©e de BAC ET la profession (questions combin√©es)\n‚Üí Attendre la r√©ponse\n‚Üí Dans la r√©ponse : si BAC d√©tect√© ‚Üí conversion (m√™me sans profession)\n‚Üí lienEnvoye reste false jusqu'√† conversion\n```\n\n### **üîÑ R√àGLE DE SUIVI : PROSPECT QUI REVIENT**\n```\nSI lienEnvoye = true ET message vague/g√©n√©ral :\n‚Üí Poser question sur la r√©servation en PRIORIT√â ABSOLUE\n‚Üí \"Avez-vous r√©serv√© votre entretien en ligne ?\"\n```\n\n---\n\n## üîç **D√âTECTION D'INTENTION (dans cet ordre de priorit√©)**\n\n### **PRIORIT√âS SELON L'√âTAT DE LA M√âMOIRE :**\n1. **üî¥ NOUVEAU** : Un prospect qui revient apr√®s avoir eu le lien (lienEnvoye = true)\n2. **üü¢ NOUVEAU** : BAC d√©tect√© dans le message ‚Üí **CONVERSION IMM√âDIATE**\n3. **üî¥ NOUVEAU** : R√©ponse √† la question de r√©servation (OUI/NON)\n4. **üî¥ NOUVEAU** : Un nouveau bachelier\n5. **üî¥ NOUVEAU** : Un lyc√©en (Terminale/Premi√®re)  \n6. **üî¥ NOUVEAU** : Un parent qui contacte pour son enfant\n7. **üî¥ NOUVEAU** : Confirmation de participation √† un entretien\n8. **üî¥ NOUVEAU** : Une r√©ticence √† prendre rendez-vous\n9. **üî¥ NOUVEAU** : Une insistance apr√®s refus initial\n10. **üü° ANCIEN** : Question g√©n√©rale (demander BAC uniquement)\n11. **üü° ANCIEN** : Message vague (demander BAC uniquement)\n12. **üü° ANCIEN** : Demande d'adresse  \n13. **üü° ANCIEN** : Blocage pour r√©server\n\n---\n\n## üìå **CAS D'UTILISATION √âTENDUS**\n\n### üü¢ **NOUVEAU CAS PRIORITAIRE : CONVERSION OPTIMIS√âE**\n\n#### **Cas CONVERSION - BAC d√©tect√© ‚Üí Conversion imm√©diate**\n**D√©tection** : Ann√©e de BAC trouv√©e dans le message (2015, 2020, \"bac 2018\", etc.)\n**Action** : Conversion directe sans demander la profession\n**Messages selon le profil :**\n\n**Pour BAC r√©cent (2020-2025) :**\n```json\n{\n  \"anneeBac\": \"ANNEE_DETECTEE\",\n  \"profession\": \"\",\n  \"lienEnvoye\": true,\n  \"message\": \"Parfait ! Avec votre Bac obtenu en [ANNEE], vous avez le profil id√©al pour nos programmes üéØ\\n\\nJe vous invite √† r√©server d√®s maintenant votre entretien gratuit avec notre expert :\\nüëâ https://eazy-visa.com/prendre-un-rendez-vous/\\n\\nIl vous expliquera toutes les opportunit√©s disponibles selon votre profil üòä\"\n}\n```\n\n**Pour BAC plus ancien (2010-2019) :**\n```json\n{\n  \"anneeBac\": \"ANNEE_DETECTEE\",\n  \"profession\": \"\",\n  \"lienEnvoye\": true,\n  \"message\": \"Excellent ! Avec votre exp√©rience depuis le Bac [ANNEE], vous avez un profil tr√®s int√©ressant üëç\\n\\nJe vous propose de r√©server votre entretien gratuit pour d√©couvrir toutes les possibilit√©s :\\nüëâ https://eazy-visa.com/prendre-un-rendez-vous/\\n\\nNotre expert analysera votre situation et vous pr√©sentera les meilleures options üòä\"\n}\n```\n\n### üî¥ **NOUVEAUX CAS PRIORITAIRES (inchang√©s)**\n\n#### **Cas PRIORITAIRE - Prospect qui revient (lienEnvoye = true)**\n**D√©tection** : Le prospect a d√©j√† re√ßu le lien de prise de rendez-vous et revient avec un nouveau message\n**Action** : Poser syst√©matiquement la question sur la r√©servation\n**Message √† envoyer** :\n```\nMerci pour votre retour ! üòä\nAvez-vous r√©serv√© votre entretien en ligne avec notre expert ?\n```\n\n#### **Cas PRIORITAIRE - R√©ponse \"OUI\" √† la r√©servation**\n**D√©tection** : Le prospect confirme avoir r√©serv√© l'entretien (oui, j'ai r√©serv√©, c'est fait, etc.)\n**Message √† envoyer** :\n```\nParfait ! üëè\nCurieux d'en savoir plus sur l'Allemagne et nos services ? üá©üá™‚ú®\nNous vous invitons √† visiter notre site web pour un premier aper√ßu complet : informations sur les √©tudes, les d√©marches et tout ce que nous proposons pour vous accompagner.\nüîç D√©couvrez tout ici üëâ https://eazy-visa.com/\nN'h√©sitez pas √† nous contacter si vous avez des questions, nous serons ravis de vous aider ! üòä\n```\n\n#### **Cas PRIORITAIRE - R√©ponse \"NON\" √† la r√©servation**\n**D√©tection** : Le prospect confirme ne pas avoir r√©serv√© (non, pas encore, j'ai oubli√©, etc.)\n**Message √† envoyer** :\n```\nPas de souci ! üòä\nVoici √† nouveau le lien pour r√©server votre entretien gratuit :\nüëâ https://eazy-visa.com/prendre-un-rendez-vous/\nüõ† Une fois sur la page, patientez quelques secondes : le calendrier va s'afficher.\nüìÖ Choisissez une date et une heure, puis remplissez vos infos.\nNous restons disponibles si vous avez besoin d'aide ! üôå\n```\n\n#### **Cas A - Prospect r√©ticent √† prendre rendez-vous**\n**D√©tection** : Le prospect h√©site, demande plus d'infos avant de s'engager, ou refuse le rendez-vous\n**Message √† envoyer** :\n```\nMerci pour votre message ! üòä\nJe comprends que vous voulez avoir toutes les infos, et c'est totalement normal.\nMais comme il existe plusieurs types de visas (√©tudes, travail, formation), avec des conditions diff√©rentes pour chacun, le meilleur moyen d'avoir une r√©ponse claire et adapt√©e √† votre situation, c'est de parler gratuitement avec l'un de nos experts.\nLors de ce rendez-vous, il vous expliquera tout en d√©tail :\n‚úÖ Les types de visas possibles pour vous\n‚úÖ Les conditions √† remplir\n‚úÖ Les solutions d'accompagnement et de financement\n‚úÖ Et vous pourrez poser toutes vos questions en direct !\nC'est 100% gratuit, sans engagement, et √ßa vous √©vite de recevoir des infos trop g√©n√©rales.\nüëâ Cliquez ici pour prendre votre RDV d√®s maintenant :\nhttps://eazy-visa.com/prendre-un-rendez-vous/\nEt si vous avez besoin d'aide pour r√©server, je suis l√† ! üòä\n```\n\n#### **Cas B - Prospect insiste apr√®s refus**\n**D√©tection** : Le prospect continue √† insister pour avoir des infos sans prendre rendez-vous\n**Message √† envoyer** :\n```\nJe comprends votre insistance, et c'est tout √† fait l√©gitime de vouloir des r√©ponses concr√®tes avant de vous lancer. üòä\nComme chaque situation est diff√©rente, et que nous tenons √† vous donner des informations fiables, compl√®tes et personnalis√©es, vous pouvez aussi venir nous rencontrer directement √† notre bureau !\nüìç Notre adresse :\nOuest Foire, Xandar 2, Villa N¬∞3\n12000 Dakar, S√©n√©gal\nüìå https://maps.app.goo.gl/bVNGCPhvWHybJUx28\nNous serions ravis de vous accueillir dans nos locaux, vous pr√©senter les diff√©rentes options (√©tudes, travail, formation) et r√©pondre √† toutes vos questions en personne. Et comme toujours, c'est gratuit et sans engagement. üôå\nDites-moi simplement quel jour vous conviendrait pour passer !\n```\n\n#### **Cas C - Confirmation de participation √† l'entretien**\n**D√©tection** : Le prospect confirme qu'il a particip√© au rendez-vous\n**Message √† envoyer** :\n```\nBonjour üëã et merci encore d'avoir particip√© √† l'entretien en ligne avec nous ! üôå\nPour la suite, un expert de notre √©quipe vous accompagnera personnellement.\n\nVous pouvez lui poser toutes vos questions directement ici :\nüìû (+221) 76 884 63 63\nIl est l√† pour vous guider, r√©pondre √† vos doutes, et vous aider √† bien pr√©parer votre projet pour l'Allemagne üá©üá™\nMerci encore pour votre confiance, et √† tr√®s bient√¥t ‚ú®\n```\n\n#### **Cas D - Parent contactant pour son enfant**\n**D√©tection** : Le message indique qu'un parent √©crit pour son fils/fille/neveu/ni√®ce\n**Message √† envoyer** :\n```\nMerci beaucoup pour votre message üôè\nEt bravo pour votre implication dans le projet de votre enfant, c'est pr√©cieux üëè\nPour que nous puissions l'aider efficacement, il est important que la personne directement concern√©e (celle qui veut partir) prenne part √† l'entretien.\nCela nous permet de :\n‚úÖ Bien comprendre son profil et son projet\n‚úÖ Lui expliquer les d√©marches et conditions en d√©tail\n‚úÖ Et surtout, r√©pondre √† ses questions personnelles\nVous pouvez bien s√ªr assister √† l'entretien avec lui/elle, et ensuite venir ensemble √† notre bureau si vous le souhaitez.\nVoici le lien pour r√©server le rendez-vous en ligne (gratuit & sans engagement) :\nüëâ https://eazy-visa.com/prendre-un-rendez-vous/\nEt si vous avez besoin d'aide pour r√©server ou vous connecter, je suis l√† pour vous guider üòä\n```\n\n#### **Cas E - Lyc√©en (Terminale/Premi√®re)**\n**D√©tection** : La personne indique qu'elle est au lyc√©e (Terminale ou Premi√®re)\n**R√®gle** : Ne pas refuser l'acc√®s\n**Message √† envoyer** :\n```\nC'est formidable que tu prennes de l'avance pour ton projet ! üëè\nUn entretien gratuit est tout √† fait possible pour t'informer sur les options apr√®s le Bac et le niveau de langue requis.\nTu pourras d√©couvrir :\n‚úÖ Les diff√©rentes possibilit√©s d'√©tudes en Allemagne\n‚úÖ Les conditions √† anticiper\n‚úÖ Le niveau de langue n√©cessaire\n‚úÖ Comment bien pr√©parer ton projet\nüìÖ Prends ton rendez-vous ici üëâ https://eazy-visa.com/prendre-un-rendez-vous/\nEt si tu as besoin d'aide pour r√©server ou te connecter, je suis l√† pour t'aider üòä\n```\n\n#### **Cas F - Nouveau bachelier**\n**D√©tection** : La personne vient d'obtenir son bac ou mentionne avoir eu son bac r√©cemment\n**Message √† envoyer** :\n```\nF√©licitations pour ton Bac ! üéâüëè\nC'est une belle √©tape que tu viens de franchir, et on te souhaite plein de r√©ussite pour la suite ! üöÄ\nSi tu envisages de partir en Allemagne pour les √©tudes, le travail ou une formation, je t'invite √† r√©server un entretien gratuit avec l'un de nos experts.\nTu y d√©couvriras :\n‚úÖ Les diff√©rentes options possibles apr√®s le Bac\n‚úÖ Les conditions √† remplir selon ton projet\n‚úÖ Et bien s√ªr, tu pourras poser toutes tes questions\nüìÖ Prends ton rendez-vous ici üëâ https://eazy-visa.com/prendre-un-rendez-vous/\nEt si tu as besoin d'aide pour r√©server ou te connecter, je suis l√† pour t'aider üòä\n```\n\n### üü° **CAS EXISTANTS MODIFI√âS**\n\n#### **Cas 1 ‚Äì Question g√©n√©rale (MODIFI√â)**  \nExemples : Comment postuler ? Quelles sont les conditions ? Est-ce payant ? Quels services proposez-vous ? C'est quoi la Chancenkarte ?  \n\n‚úÖ **Nouvelle r√©ponse** :  \n- Si lienEnvoye = false ‚Üí rediriger vers le lien + demander l'ann√©e de BAC ET la profession\n- Si lienEnvoye = true ‚Üí ne pas redonner le lien, expliquer que tout sera abord√© pendant l'entretien d√©j√† pr√©vu\n\n#### **Cas 2 ‚Äì Message vague ou d'int√©r√™t (MODIFI√â)**  \nExemples : Je veux en savoir plus, Je suis int√©ress√©, Puis-je avoir des infos ?  \n\n‚úÖ **Nouvelle r√©ponse** :  \n- Si lienEnvoye = false ‚Üí demander l'ann√©e de BAC ET la profession\n- Si lienEnvoye = true ‚Üí poser la question sur la r√©servation\n\n#### **Cas 3 ‚Äì Adresse ou localisation (inchang√©)**  \nExemples : O√π √™tes-vous ? Votre adresse ?  \n\n‚úÖ Tu peux r√©pondre directement, m√™me si le lien a √©t√© envoy√©.\n\n---\n\n## üîÅ **R√âPONSES SELON LE CONTEXTE OPTIMIS√âES**\n\n### **Cas lienEnvoye = false**\n\n#### **Question g√©n√©rale (NOUVELLE VERSION) :**\n```json\n{\n  \"anneeBac\": \"\",\n  \"profession\": \"\",\n  \"lienEnvoye\": true,\n  \"message\": \"Bonjour et bienvenue ! üòä\\n\\nJe suis Anita de l'agence internationale Eazy Visa.\\nMerci pour votre message ! Toutes les informations (visa, proc√©dure, documents, etc.) seront expliqu√©es pendant un entretien gratuit avec un expert üí¨\\n\\nüìÖ R√©servez ici : https://eazy-visa.com/prendre-un-rendez-vous/\\n\\nüóì Pour mieux vous orienter, pourriez-vous me dire en quelle ann√©e vous avez obtenu votre bac ?\"\n}\n```\n\n#### **Message vague (NOUVELLE VERSION) :**\n```json\n{\n  \"anneeBac\": \"\",\n  \"profession\": \"\",\n  \"lienEnvoye\": false,\n  \"message\": \"Bonjour et bienvenue ! üòä\\n\\nJe suis Anita de l'agence internationale Eazy Visa.\\nAvec plaisir ! Pour bien vous orienter :\\n\\nüóì En quelle ann√©e avez-vous obtenu votre bac ?\"\n}\n```\n\n#### **Demande d'adresse (inchang√©) :**\n```json\n{\n  \"anneeBac\": \"\",\n  \"profession\": \"\",\n  \"lienEnvoye\": false,\n  \"message\": \"Bonjour et bienvenue ! üòä\\n\\nJe suis Anita de l'agence internationale Eazy Visa.\\nNous sommes situ√©s √† Dakar, S√©n√©gal üìç\\nAdresse : Ouest Foire, Xandar 2, Villa N¬∞3, 12000 Dakar, S√©n√©gal\\nüìå https://maps.app.goo.gl/bVNGCPhvWHybJUx28\\n\\nL'accompagnement est 100 % en ligne, mais nos bureaux sont ouverts si besoin üòä\"\n}\n```\n\n### **Cas lienEnvoye = true**\n\n#### **Prospect qui revient (PRIORIT√â ABSOLUE) :**\n```json\n{\n  \"anneeBac\": \"...\",\n  \"profession\": \"...\",\n  \"lienEnvoye\": true,\n  \"message\": \"Merci pour votre retour ! üòä\\nAvez-vous r√©serv√© votre entretien en ligne avec notre expert ?\"\n}\n```\n\n#### **R√©ponse OUI r√©servation :**\n```json\n{\n  \"anneeBac\": \"...\",\n  \"profession\": \"...\",\n  \"lienEnvoye\": true,\n  \"message\": \"Parfait ! üëè\\nCurieux d'en savoir plus sur l'Allemagne et nos services ? üá©üá™‚ú®\\nNous vous invitons √† visiter notre site web pour un premier aper√ßu complet : informations sur les √©tudes, les d√©marches et tout ce que nous proposons pour vous accompagner.\\nüîç D√©couvrez tout ici üëâ https://eazy-visa.com/\\nN'h√©sitez pas √† nous contacter si vous avez des questions, nous serons ravis de vous aider ! üòä\"\n}\n```\n\n#### **R√©ponse NON r√©servation :**\n```json\n{\n  \"anneeBac\": \"...\",\n  \"profession\": \"...\",\n  \"lienEnvoye\": true,\n  \"message\": \"Pas de souci ! üòä\\nVoici √† nouveau le lien pour r√©server votre entretien gratuit :\\nüëâ https://eazy-visa.com/prendre-un-rendez-vous/\\nüõ† Une fois sur la page, patientez quelques secondes : le calendrier va s'afficher.\\nüìÖ Choisissez une date et une heure, puis remplissez vos infos.\\nNous restons disponibles si vous avez besoin d'aide ! üôå\"\n}\n```\n\n#### **Question g√©n√©rale (MODIFI√âE) :**\n```json\n{\n  \"anneeBac\": \"...\",\n  \"profession\": \"...\",\n  \"lienEnvoye\": true,\n  \"message\": \"Merci pour votre message !\\nToutes les informations (conditions, proc√©dure, documents, etc.) sont expliqu√©es pendant l'entretien avec un expert Eazy Visa üí¨\\n\\nVous pourrez poser toutes vos questions √† ce moment-l√† üòä\"\n}\n```\n\n#### **Blocage pour r√©server (seul cas o√π le lien est renvoy√©) :**\n```json\n{\n  \"anneeBac\": \"...\",\n  \"profession\": \"...\",\n  \"lienEnvoye\": true,\n  \"message\": \"Pas de souci ! Pour r√©server, cliquez sur ce lien üëâ https://eazy-visa.com/prendre-un-rendez-vous/ \\n\\nüõ† Une fois sur la page, patientez quelques secondes : le calendrier va s'afficher.\\nüìÖ Choisissez une date et une heure, puis remplissez vos infos.\\n\\nNous restons disponibles si besoin !\"\n}\n```\n\n---\n\n## üì§ **FORMAT DE SORTIE OBLIGATOIRE**\nUn objet JSON brut, sans aucun texte autour :\n\n```json\n{\n  \"anneeBac\": \"ann√©e extraite ou vide\",\n  \"profession\": \"profession extraite ou vide\",\n  \"lienEnvoye\": false ou true,\n  \"message\": \"Texte de r√©ponse √† envoyer par WhatsApp\"\n}\n```\n\n---\n\n## üéØ **ORDRE DE PRIORIT√â OPTIMIS√â POUR LA D√âTECTION**\n1. **üî¥ Prospect qui revient (lienEnvoye = true)** ‚Üí Poser question r√©servation\n2. **üü¢ BAC d√©tect√© dans message** ‚Üí **CONVERSION IMM√âDIATE**\n3. **üî¥ R√©ponse r√©servation** ‚Üí Rediriger selon OUI/NON\n4. **üî¥ Nouveau bachelier** ‚Üí Message de f√©licitations + conversion\n5. **üî¥ Lyc√©en** ‚Üí Message d'encouragement + conversion\n6. **üî¥ Parent pour enfant** ‚Üí Message de redirection vers l'enfant\n7. **üî¥ Confirmation entretien** ‚Üí Message de suivi\n8. **üî¥ R√©ticence/Insistance** ‚Üí Messages de persuasion appropri√©s\n9. **üü° Question g√©n√©rale** ‚Üí Demander BAC uniquement\n10. **üü° Message vague** ‚Üí Demander BAC uniquement\n11. **üü° Demande adresse** ‚Üí R√©pondre directement\n\n---\n\n## ‚ö†Ô∏è **R√àGLES CRITIQUES ET FLUX OBLIGATOIRE OPTIMIS√â**\n\n### **üö® FLUX DE TRAITEMENT OBLIGATOIRE (√† respecter dans cet ordre) :**\n\n#### **1Ô∏è‚É£ TOUJOURS commencer par :** \n```\nRegarder_prospect(num√©ro_whatsapp)\n```\n\n#### **2Ô∏è‚É£ PUIS analyser le message selon les donn√©es r√©cup√©r√©es ET appliquer la NOUVELLE LOGIQUE :**\n- **PRIORIT√â 1** : Si `lienEnvoye = true` ‚Üí Question r√©servation\n- **PRIORIT√â 2** : Si BAC d√©tect√© ‚Üí Conversion imm√©diate\n- **PRIORIT√â 3** : Si pas de BAC ‚Üí Demander BAC uniquement\n- D√©tecter les patterns selon l'√©tat de la m√©moire\n- Appliquer la logique de priorit√© d√©finie\n\n#### **3Ô∏è‚É£ ENSUITE g√©n√©rer la r√©ponse appropri√©e :**\n- Respecter la r√®gle de salutation (premi√®re fois uniquement)\n- Adapter le message selon l'historique\n- Utiliser les bonnes r√©ponses selon le contexte\n- **METTRE lienEnvoye = true d√®s qu'un lien est envoy√©**\n\n#### **4Ô∏è‚É£ ENFIN mettre √† jour avec :**\n```\nAppend_prospect(nouvelles_donn√©es)\n```\n\n### **üö® OBLIGATIONS ABSOLUES OPTIMIS√âES :**\n1. **CONSULTATION M√âMOIRE** en premi√®re action obligatoire\n2. **CONVERSION IMM√âDIATE** si BAC d√©tect√© (ne pas demander profession)\n3. **DEMANDER BAC UNIQUEMENT** si pas d'info BAC (ne plus demander profession et BAC ensemble)\n4. **QUESTION R√âSERVATION** si `lienEnvoye = true` et message vague/g√©n√©ral\n5. **SALUTATION** uniquement au premier contact (m√©moire vide)\n6. **MISE √Ä JOUR M√âMOIRE** en derni√®re action obligatoire\n7. **METTRE lienEnvoye = true** d√®s qu'un lien de RDV est envoy√©\n\n### **üéØ OBJECTIFS D'OPTIMISATION :**\n- **R√©duire les √©tapes** avant conversion (BAC suffit)\n- **Acc√©l√©rer la prise de rendez-vous** \n- **√âviter les questions superflues** (profession devient optionnelle)\n- **Am√©liorer le taux de conversion** par simplification du parcours\n- **Suivre pr√©cis√©ment** les prospects qui ont d√©j√† eu le lien\n- **√âviter r√©p√©titions** gr√¢ce √† la consultation syst√©matique de la m√©moire\n\n### **‚ùå ERREURS √Ä √âVITER ABSOLUMENT :**\n- R√©pondre sans consulter la m√©moire\n- Demander profession ET BAC en m√™me temps si pas de BAC d√©tect√©\n- Saluer un prospect qui a d√©j√† eu un √©change\n- Renvoyer le lien sans v√©rifier si d√©j√† envoy√© (sauf blocage technique)\n- Oublier de mettre lienEnvoye = true apr√®s envoi du lien\n- Oublier de mettre √† jour la m√©moire apr√®s traitement"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -1072,
        -496
      ],
      "id": "bcf7a64f-40dc-4812-b927-7fe1fcfe8064",
      "name": "AI Agent"
    },
    {
      "parameters": {
        "jsonSchemaExample": "{\n  \"anneeBac\": \"ann√©e extraite ou vide\",\n  \"profession\": \"profession extraite ou vide\",\n  \"lienEnvoye\": false,\n  \"message\": \"Texte de r√©ponse √† envoyer par WhatsApp\"\n}",
        "autoFix": true
      },
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "typeVersion": 1.3,
      "position": [
        -912,
        -288
      ],
      "id": "c6b08de3-46a8-4223-b04c-35cb7b241cd6",
      "name": "Structured Output Parser"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "gpt-4o"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -1216,
        -288
      ],
      "id": "8780315c-e32e-4d7d-9f72-14335ef4b73c",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "80U5hXgVtpGeuws4",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.From }}",
        "contextWindowLength": 100
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -1088,
        -288
      ],
      "id": "a0730522-582e-4fcf-bcdc-1fcef6cdc523",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -864,
        -128
      ],
      "id": "5e886d4a-76b4-4cc0-80ea-6564899d975d",
      "name": "OpenAI Chat Model1",
      "credentials": {
        "openAiApi": {
          "id": "80U5hXgVtpGeuws4",
          "name": "OpenAi account"
        }
      }
    },
    {
      "parameters": {
        "operation": "send",
        "phoneNumberId": "622046317669551",
        "recipientPhoneNumber": "={{ $('Edit Fields1').item.json.From }}",
        "textBody": "={{ $('AI Agent').item.json.output.message }}",
        "additionalFields": {}
      },
      "type": "n8n-nodes-base.whatsApp",
      "typeVersion": 1,
      "position": [
        352,
        -512
      ],
      "id": "674ee4e8-e885-4a7c-ade5-4ef908134a53",
      "name": "Send message",
      "webhookId": "7279c3d3-2d6d-4912-995d-8b8f04ae58ec",
      "credentials": {
        "whatsAppApi": {
          "id": "9eXgurNjgGM40wSq",
          "name": "WhatsApp account 2"
        }
      }
    },
    {
      "parameters": {
        "documentId": {
          "__rl": true,
          "value": "1P27ewnU2oAiJ_OV94HqNSZZbl3WqEPSbiQt6-axcfT4",
          "mode": "list",
          "cachedResultName": "Prospect eazy-visa",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1P27ewnU2oAiJ_OV94HqNSZZbl3WqEPSbiQt6-axcfT4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Tabellenblatt1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1P27ewnU2oAiJ_OV94HqNSZZbl3WqEPSbiQt6-axcfT4/edit#gid=0"
        },
        "filtersUI": {
          "values": [
            {
              "lookupColumn": "Num√©ro WhatsApp        ",
              "lookupValue": "={{ $('Edit Fields1').item.json.From }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheetsTool",
      "typeVersion": 4.7,
      "position": [
        -1024,
        -112
      ],
      "id": "9870a281-aa02-43d5-9e49-436aa7573e4c",
      "name": "Regarder_prospect",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "YKrW83O20IIqvYZ1",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "append",
        "documentId": {
          "__rl": true,
          "value": "1sPMqgqmATOctcPjEV9Jgz7DA_x5YxB5qJE-81qCGD2c",
          "mode": "list",
          "cachedResultName": "Unbenannte Tabelle",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1sPMqgqmATOctcPjEV9Jgz7DA_x5YxB5qJE-81qCGD2c/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Tabellenblatt1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1sPMqgqmATOctcPjEV9Jgz7DA_x5YxB5qJE-81qCGD2c/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "                          Message": "={{ $('WhatsApp Trigger').item.json.messages[0].text.body }}",
            "Num√©ro": "={{ $('Edit Fields1').item.json.From }}",
            "Reponse agent": "={{ $json.output.message }}"
          },
          "matchingColumns": [],
          "schema": [
            {
              "id": "                          Message",
              "displayName": "                          Message",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Num√©ro",
              "displayName": "Num√©ro",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Reponse agent",
              "displayName": "Reponse agent",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -720,
        -496
      ],
      "id": "184181d7-e793-4a70-abd1-2432de0de605",
      "name": "Append row in sheet",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "YKrW83O20IIqvYZ1",
          "name": "Google Sheets account 2"
        }
      }
    },
    {
      "parameters": {
        "operation": "appendOrUpdate",
        "documentId": {
          "__rl": true,
          "value": "1P27ewnU2oAiJ_OV94HqNSZZbl3WqEPSbiQt6-axcfT4",
          "mode": "list",
          "cachedResultName": "Prospect eazy-visa",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1P27ewnU2oAiJ_OV94HqNSZZbl3WqEPSbiQt6-axcfT4/edit?usp=drivesdk"
        },
        "sheetName": {
          "__rl": true,
          "value": "gid=0",
          "mode": "list",
          "cachedResultName": "Tabellenblatt1",
          "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1P27ewnU2oAiJ_OV94HqNSZZbl3WqEPSbiQt6-axcfT4/edit#gid=0"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "Num√©ro WhatsApp        ": "{{ $json['Num√©ro'] }}",
            "Ann√©e Bac": "{{ $('AI Agent').item.json.output.anneeBac }}",
            "Profession": "{{ $('AI Agent').item.json.output.profession }}",
            "Lien envoy√© ?": "{{ $('AI Agent').item.json.output.lienEnvoye }}"
          },
          "matchingColumns": [
            "Num√©ro WhatsApp        "
          ],
          "schema": [
            {
              "id": "Num√©ro WhatsApp        ",
              "displayName": "Num√©ro WhatsApp        ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true,
              "removed": false
            },
            {
              "id": "Ann√©e Bac",
              "displayName": "Ann√©e Bac",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Profession",
              "displayName": "Profession",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "Lien envoy√© ?",
              "displayName": "Lien envoy√© ?",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "relance24h        ",
              "displayName": "relance24h        ",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            },
            {
              "id": "relance48h",
              "displayName": "relance48h",
              "required": false,
              "defaultMatch": false,
              "display": true,
              "type": "string",
              "canBeUsedToMatch": true
            }
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {}
      },
      "type": "n8n-nodes-base.googleSheets",
      "typeVersion": 4.7,
      "position": [
        -512,
        -496
      ],
      "id": "6a215dfc-7699-4cf9-9c87-2f848beff17d",
      "name": "Append_prospect",
      "credentials": {
        "googleSheetsOAuth2Api": {
          "id": "YKrW83O20IIqvYZ1",
          "name": "Google Sheets account 2"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "WhatsApp Trigger": {
      "main": [
        [
          {
            "node": "Split Out",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Split Out": {
      "main": [
        [
          {
            "node": "Switch",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch": {
      "main": [
        [
          {
            "node": "Download media",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Download media1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Edit Fields",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download media": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Transcribe a recording",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download media1": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Analyze image",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyze image": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcribe a recording": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Structured Output Parser": {
      "ai_outputParser": [
        [
          {
            "node": "AI Agent",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Structured Output Parser",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "AI Agent": {
      "main": [
        [
          {
            "node": "Append row in sheet",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Regarder_prospect": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Append row in sheet": {
      "main": [
        [
          {
            "node": "Append_prospect",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Append_prospect": {
      "main": [
        [
          {
            "node": "Send message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1",
    "callerPolicy": "workflowsFromSameOwner"
  },
  "versionId": "e402acce-965e-4ab5-84e8-a46dde1549ff",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "d6c39037902f2df67c4639c5e6b610df41f85a84002fa06e22f6d08ba3d13e27"
  },
  "id": "GwBhA72rOEze3lqa",
  "tags": []
}